{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///cornerstoneWebImageLoader.min.js","webpack:///webpack/bootstrap 9952aba8a8b104f83f66","webpack:///external {\"commonjs\":\"cornerstone-core\",\"commonjs2\":\"cornerstone-core\",\"amd\":\"cornerstone-core\",\"root\":\"cornerstone\"}","webpack:///./arrayBufferToImage.js","webpack:///./createImage.js","webpack:///./loadImage.js","webpack:///./index.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","default","arrayBuffer","deferred","$","Deferred","image","Image","arrayBufferView","Uint8Array","blob","Blob","urlCreator","window","URL","webkitURL","imageUrl","createObjectURL","src","onload","resolve","revokeObjectURL","onerror","err","reject","promise","imageId","getPixelData","imageData","getImageData","imageDataData","data","numPixels","naturalHeight","naturalWidth","storedPixelData","imageDataIndex","storedPixelDataIndex","context","lastImageIdDrawn","canvas","getContext","height","width","drawImage","getCanvas","getImage","rows","columns","minPixelValue","maxPixelValue","slope","intercept","windowCenter","windowWidth","render","cornerstone","renderWebImage","color","columnPixelSpacing","undefined","rowPixelSpacing","invert","sizeInBytes","_cornerstoneCore","obj","newObj","key","document","createElement","_interopRequireDefault","loadImage","xhr","XMLHttpRequest","open","responseType","options","beforeSend","_arrayBufferToImage2","response","then","imageObject","_createImage2","error","onprogress","oProgress","lengthComputable","loaded","total","percentComplete","Math","round","events","trigger","send","configure","opts","_arrayBufferToImage","_createImage","createImage","arrayBufferToImage","_loadImage","registerImageLoader"],"mappings":"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","file":"cornerstoneWebImageLoader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cornerstone-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstoneWebImageLoader\", [\"cornerstone-core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstoneWebImageLoader\"] = factory(require(\"cornerstone-core\"));\n\telse\n\t\troot[\"cornerstoneWebImageLoader\"] = factory(root[\"cornerstone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*! cornerstoneWebImageLoader - 0.8.0 - 2017-06-08 | (c) 2016 Chris Hafey | https://github.com/chafey/cornerstoneWebImageLoader */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"cornerstone-core\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstoneWebImageLoader\", [\"cornerstone-core\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstoneWebImageLoader\"] = factory(require(\"cornerstone-core\"));\n\telse\n\t\troot[\"cornerstoneWebImageLoader\"] = factory(root[\"cornerstone\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (arrayBuffer) {\n  var deferred = $.Deferred();\n\n  var image = new Image();\n\n  var arrayBufferView = new Uint8Array(arrayBuffer);\n  var blob = new Blob([arrayBufferView]);\n  var urlCreator = window.URL || window.webkitURL;\n  var imageUrl = urlCreator.createObjectURL(blob);\n\n  image.src = imageUrl;\n  image.onload = function () {\n    deferred.resolve(image);\n    urlCreator.revokeObjectURL(imageUrl);\n  };\n  image.onerror = function (err) {\n    urlCreator.revokeObjectURL(imageUrl);\n    deferred.reject(err);\n  };\n\n  return deferred.promise();\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, imageId) {\n  // extract the attributes we need\n  var rows = image.naturalHeight;\n  var columns = image.naturalWidth;\n\n  function getPixelData() {\n    var imageData = getImageData();\n    var imageDataData = imageData.data;\n    var numPixels = image.naturalHeight * image.naturalWidth;\n    var storedPixelData = new Uint8Array(numPixels * 4);\n    var imageDataIndex = 0;\n    var storedPixelDataIndex = 0;\n\n    for (var i = 0; i < numPixels; i++) {\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = 255; // alpha\n      imageDataIndex++;\n    }\n\n    return storedPixelData;\n  }\n\n  function getImageData() {\n    var context = void 0;\n\n    if (lastImageIdDrawn === imageId) {\n      context = canvas.getContext('2d');\n    } else {\n      canvas.height = image.naturalHeight;\n      canvas.width = image.naturalWidth;\n      context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      lastImageIdDrawn = imageId;\n    }\n\n    return context.getImageData(0, 0, image.naturalWidth, image.naturalHeight);\n  }\n\n  function getCanvas() {\n    if (lastImageIdDrawn === imageId) {\n      return canvas;\n    }\n\n    canvas.height = image.naturalHeight;\n    canvas.width = image.naturalWidth;\n    var context = canvas.getContext('2d');\n\n    context.drawImage(image, 0, 0);\n    lastImageIdDrawn = imageId;\n\n    return canvas;\n  }\n\n  function getImage() {\n    return image;\n  }\n\n  // Extract the various attributes we need\n  return {\n    imageId: imageId,\n    minPixelValue: 0, // calculated below\n    maxPixelValue: 255, // calculated below\n    slope: 1.0,\n    intercept: 0,\n    windowCenter: 128,\n    windowWidth: 255,\n    render: cornerstone.renderWebImage,\n    getPixelData: getPixelData,\n    getImageData: getImageData,\n    getCanvas: getCanvas,\n    getImage: getImage,\n    // storedPixelData: extractStoredPixels(image),\n    rows: rows,\n    columns: columns,\n    height: rows,\n    width: columns,\n    color: true,\n    columnPixelSpacing: undefined,\n    rowPixelSpacing: undefined,\n    invert: false,\n    sizeInBytes: rows * columns * 4 // we don't know for sure so we over estimate to be safe\n  };\n};\n\nvar _cornerstoneCore = __webpack_require__(0);\n\nvar cornerstone = _interopRequireWildcard(_cornerstoneCore);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar canvas = document.createElement('canvas');\nvar lastImageIdDrawn = '';\n\n/**\n * creates a cornerstone Image object for the specified Image and imageId\n *\n * @param image - An Image\n * @param imageId - the imageId for this image\n * @returns Cornerstone Image Object\n */\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadImage = loadImage;\nexports.configure = configure;\n\nvar _cornerstoneCore = __webpack_require__(0);\n\nvar cornerstone = _interopRequireWildcard(_cornerstoneCore);\n\nvar _arrayBufferToImage = __webpack_require__(1);\n\nvar _arrayBufferToImage2 = _interopRequireDefault(_arrayBufferToImage);\n\nvar _createImage = __webpack_require__(2);\n\nvar _createImage2 = _interopRequireDefault(_createImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\n//\n// This is a cornerstone image loader for web images such as PNG and JPEG\n//\nvar options = {\n  // callback allowing customization of the xhr (e.g. adding custom auth headers, cors, etc)\n  beforeSend: function beforeSend() /* xhr */{}\n};\n\n// Loads an image given a url to an image\nfunction loadImage(imageId) {\n  var deferred = $.Deferred();\n\n  var xhr = new XMLHttpRequest();\n\n  xhr.open('GET', imageId, true);\n  xhr.responseType = 'arraybuffer';\n  options.beforeSend(xhr);\n\n  xhr.onload = function () {\n    var imagePromise = (0, _arrayBufferToImage2.default)(this.response);\n\n    imagePromise.then(function (image) {\n      var imageObject = (0, _createImage2.default)(image, imageId);\n\n      deferred.resolve(imageObject);\n    }, function (error) {\n      deferred.reject(error);\n    });\n  };\n  xhr.onprogress = function (oProgress) {\n\n    if (oProgress.lengthComputable) {\n      // evt.loaded the bytes browser receive\n      // evt.total the total bytes seted by the header\n      //\n      var loaded = oProgress.loaded;\n      var total = oProgress.total;\n      var percentComplete = Math.round(loaded / total * 100);\n\n      $(cornerstone.events).trigger('CornerstoneImageLoadProgress', {\n        imageId: imageId,\n        loaded: loaded,\n        total: total,\n        percentComplete: percentComplete\n      });\n    }\n  };\n  xhr.send();\n\n  return deferred.promise();\n}\n\nfunction configure(opts) {\n  options = opts;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.configure = exports.loadImage = exports.createImage = exports.arrayBufferToImage = undefined;\n\nvar _arrayBufferToImage = __webpack_require__(1);\n\nvar _arrayBufferToImage2 = _interopRequireDefault(_arrayBufferToImage);\n\nvar _createImage = __webpack_require__(2);\n\nvar _createImage2 = _interopRequireDefault(_createImage);\n\nvar _loadImage = __webpack_require__(3);\n\nvar _cornerstoneCore = __webpack_require__(0);\n\nvar cornerstone = _interopRequireWildcard(_cornerstoneCore);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.arrayBufferToImage = _arrayBufferToImage2.default;\nexports.createImage = _createImage2.default;\nexports.loadImage = _loadImage.loadImage;\nexports.configure = _loadImage.configure;\n\n// Register the http and https prefixes so we can use standard web urls directly\n\ncornerstone.registerImageLoader('http', _loadImage.loadImage);\ncornerstone.registerImageLoader('https', _loadImage.loadImage);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// cornerstoneWebImageLoader.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9952aba8a8b104f83f66","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"cornerstone-core\",\"commonjs2\":\"cornerstone-core\",\"amd\":\"cornerstone-core\",\"root\":\"cornerstone\"}\n// module id = 0\n// module chunks = 0","\n/**\n * Convert array buffer to image. Returns a promise that resolves to an Image object for the bytes in arrayBuffer\n *\n * @param arrayBuffer - arrayBuffer with bytes for a web image (e.g. JPEG, PNG, etc)\n * @returns {Promise} Promise that resolves to an Image object\n */\nexport default function (arrayBuffer) {\n  const deferred = $.Deferred();\n\n  const image = new Image();\n\n  const arrayBufferView = new Uint8Array(arrayBuffer);\n  const blob = new Blob([arrayBufferView]);\n  const urlCreator = window.URL || window.webkitURL;\n  const imageUrl = urlCreator.createObjectURL(blob);\n\n  image.src = imageUrl;\n  image.onload = function () {\n    deferred.resolve(image);\n    urlCreator.revokeObjectURL(imageUrl);\n  };\n  image.onerror = function (err) {\n    urlCreator.revokeObjectURL(imageUrl);\n    deferred.reject(err);\n  };\n\n  return deferred.promise();\n}\n\n\n\n// WEBPACK FOOTER //\n// ./arrayBufferToImage.js","import * as cornerstone from 'cornerstone-core';\n\nconst canvas = document.createElement('canvas');\nlet lastImageIdDrawn = '';\n\n/**\n * creates a cornerstone Image object for the specified Image and imageId\n *\n * @param image - An Image\n * @param imageId - the imageId for this image\n * @returns Cornerstone Image Object\n */\nexport default function (image, imageId) {\n  // extract the attributes we need\n  const rows = image.naturalHeight;\n  const columns = image.naturalWidth;\n\n  function getPixelData () {\n    const imageData = getImageData();\n    const imageDataData = imageData.data;\n    const numPixels = image.naturalHeight * image.naturalWidth;\n    const storedPixelData = new Uint8Array(numPixels * 4);\n    let imageDataIndex = 0;\n    let storedPixelDataIndex = 0;\n\n    for (let i = 0; i < numPixels; i++) {\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = 255; // alpha\n      imageDataIndex++;\n    }\n\n    return storedPixelData;\n  }\n\n  function getImageData () {\n    let context;\n\n    if (lastImageIdDrawn === imageId) {\n      context = canvas.getContext('2d');\n    } else {\n      canvas.height = image.naturalHeight;\n      canvas.width = image.naturalWidth;\n      context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      lastImageIdDrawn = imageId;\n    }\n\n    return context.getImageData(0, 0, image.naturalWidth, image.naturalHeight);\n  }\n\n  function getCanvas () {\n    if (lastImageIdDrawn === imageId) {\n      return canvas;\n    }\n\n    canvas.height = image.naturalHeight;\n    canvas.width = image.naturalWidth;\n    const context = canvas.getContext('2d');\n\n    context.drawImage(image, 0, 0);\n    lastImageIdDrawn = imageId;\n\n    return canvas;\n  }\n\n  function getImage () {\n    return image;\n  }\n\n  // Extract the various attributes we need\n  return {\n    imageId,\n    minPixelValue: 0, // calculated below\n    maxPixelValue: 255, // calculated below\n    slope: 1.0,\n    intercept: 0,\n    windowCenter: 128,\n    windowWidth: 255,\n    render: cornerstone.renderWebImage,\n    getPixelData,\n    getImageData,\n    getCanvas,\n    getImage,\n    // storedPixelData: extractStoredPixels(image),\n    rows,\n    columns,\n    height: rows,\n    width: columns,\n    color: true,\n    columnPixelSpacing: undefined,\n    rowPixelSpacing: undefined,\n    invert: false,\n    sizeInBytes: rows * columns * 4 // we don't know for sure so we over estimate to be safe\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./createImage.js","import * as cornerstone from 'cornerstone-core';\nimport arrayBufferToImage from './arrayBufferToImage';\nimport createImage from './createImage';\n\n//\n// This is a cornerstone image loader for web images such as PNG and JPEG\n//\nlet options = {\n  // callback allowing customization of the xhr (e.g. adding custom auth headers, cors, etc)\n  beforeSend (/* xhr */) {}\n};\n\n\n// Loads an image given a url to an image\nexport function loadImage (imageId) {\n  const deferred = $.Deferred();\n\n  const xhr = new XMLHttpRequest();\n\n  xhr.open('GET', imageId, true);\n  xhr.responseType = 'arraybuffer';\n  options.beforeSend(xhr);\n\n  xhr.onload = function () {\n    const imagePromise = arrayBufferToImage(this.response);\n\n    imagePromise.then(function (image) {\n      const imageObject = createImage(image, imageId);\n\n      deferred.resolve(imageObject);\n    }, function (error) {\n      deferred.reject(error);\n    });\n  };\n  xhr.onprogress = function (oProgress) {\n\n    if (oProgress.lengthComputable) {  // evt.loaded the bytes browser receive\n        // evt.total the total bytes seted by the header\n        //\n      const loaded = oProgress.loaded;\n      const total = oProgress.total;\n      const percentComplete = Math.round((loaded / total) * 100);\n\n      $(cornerstone.events).trigger('CornerstoneImageLoadProgress', {\n        imageId,\n        loaded,\n        total,\n        percentComplete\n      });\n    }\n  };\n  xhr.send();\n\n  return deferred.promise();\n}\n\nexport function configure (opts) {\n  options = opts;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./loadImage.js","import arrayBufferToImage from './arrayBufferToImage';\nimport createImage from './createImage';\nimport { loadImage, configure } from './loadImage';\nimport * as cornerstone from 'cornerstone-core';\n\nexport {\n    arrayBufferToImage,\n    createImage,\n    loadImage,\n    configure\n};\n\n// Register the http and https prefixes so we can use standard web urls directly\ncornerstone.registerImageLoader('http', loadImage);\ncornerstone.registerImageLoader('https', loadImage);\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}