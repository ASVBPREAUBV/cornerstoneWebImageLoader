{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///cornerstoneWebImageLoader.min.js","webpack:///webpack/bootstrap acf17fd3694d46ad0f02","webpack:///./externalModules.js","webpack:///./arrayBufferToImage.js","webpack:///./createImage.js","webpack:///./loadImage.js","webpack:///./index.js","webpack:///./registerLoaders.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","external","undefined","_registerLoaders","_registerLoaders2","obj","default","cornerstone","$","window","cs","arrayBuffer","Promise","resolve","reject","image","Image","arrayBufferView","Uint8Array","blob","Blob","urlCreator","URL","webkitURL","imageUrl","createObjectURL","src","onload","revokeObjectURL","onerror","error","imageId","getPixelData","imageData","getImageData","imageDataData","data","numPixels","naturalHeight","naturalWidth","storedPixelData","imageDataIndex","storedPixelDataIndex","context","lastImageIdDrawn","canvas","getContext","height","width","drawImage","getCanvas","rows","columns","minPixelValue","maxPixelValue","slope","intercept","windowCenter","windowWidth","render","_externalModules","renderWebImage","getImage","color","columnPixelSpacing","rowPixelSpacing","invert","sizeInBytes","document","createElement","_interopRequireDefault","loadImage","deferred","Deferred","xhr","XMLHttpRequest","open","responseType","options","beforeSend","_arrayBufferToImage2","response","then","imageObject","_createImage2","onprogress","oProgress","lengthComputable","loaded","total","percentComplete","Math","round","eventData","events","trigger","customEvent","CustomEvent","detail","dispatchEvent","send","configure","opts","_arrayBufferToImage","_createImage","createImage","arrayBufferToImage","_loadImage","registerImageLoader"],"mappings":"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","file":"cornerstoneWebImageLoader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstoneWebImageLoader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstoneWebImageLoader\"] = factory();\n\telse\n\t\troot[\"cornerstoneWebImageLoader\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/*! cornerstone-web-image-loader - 1.0.0 - 2017-12-06 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstoneWebImageLoader */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"cornerstoneWebImageLoader\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cornerstoneWebImageLoader\"] = factory();\n\telse\n\t\troot[\"cornerstoneWebImageLoader\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.external = undefined;\n\nvar _registerLoaders = __webpack_require__(5);\n\nvar _registerLoaders2 = _interopRequireDefault(_registerLoaders);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar cornerstone = void 0;\nvar $ = window.$;\n\nvar external = {\n  set cornerstone(cs) {\n    cornerstone = cs;\n\n    (0, _registerLoaders2.default)(cornerstone);\n  },\n  get cornerstone() {\n    return cornerstone;\n  },\n  set $(module) {\n    $ = module;\n  },\n  get $() {\n    return $;\n  }\n};\n\nexports.external = external;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (arrayBuffer) {\n  return new Promise(function (resolve, reject) {\n    var image = new Image();\n    var arrayBufferView = new Uint8Array(arrayBuffer);\n    var blob = new Blob([arrayBufferView]);\n    var urlCreator = window.URL || window.webkitURL;\n    var imageUrl = urlCreator.createObjectURL(blob);\n\n    image.src = imageUrl;\n    image.onload = function () {\n      resolve(image);\n      urlCreator.revokeObjectURL(imageUrl);\n    };\n\n    image.onerror = function (error) {\n      urlCreator.revokeObjectURL(imageUrl);\n      reject(error);\n    };\n  });\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (image, imageId) {\n  // extract the attributes we need\n  var rows = image.naturalHeight;\n  var columns = image.naturalWidth;\n\n  function getPixelData() {\n    var imageData = getImageData();\n    var imageDataData = imageData.data;\n    var numPixels = image.naturalHeight * image.naturalWidth;\n    var storedPixelData = new Uint8Array(numPixels * 4);\n    var imageDataIndex = 0;\n    var storedPixelDataIndex = 0;\n\n    for (var i = 0; i < numPixels; i++) {\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = 255; // alpha\n      imageDataIndex++;\n    }\n\n    return storedPixelData;\n  }\n\n  function getImageData() {\n    var context = void 0;\n\n    if (lastImageIdDrawn === imageId) {\n      context = canvas.getContext('2d');\n    } else {\n      canvas.height = image.naturalHeight;\n      canvas.width = image.naturalWidth;\n      context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      lastImageIdDrawn = imageId;\n    }\n\n    return context.getImageData(0, 0, image.naturalWidth, image.naturalHeight);\n  }\n\n  function getCanvas() {\n    if (lastImageIdDrawn === imageId) {\n      return canvas;\n    }\n\n    canvas.height = image.naturalHeight;\n    canvas.width = image.naturalWidth;\n    var context = canvas.getContext('2d');\n\n    context.drawImage(image, 0, 0);\n    lastImageIdDrawn = imageId;\n\n    return canvas;\n  }\n\n  // Extract the various attributes we need\n  return {\n    imageId: imageId,\n    minPixelValue: 0,\n    maxPixelValue: 255,\n    slope: 1.0,\n    intercept: 0,\n    windowCenter: 128,\n    windowWidth: 255,\n    render: _externalModules.external.cornerstone.renderWebImage,\n    getPixelData: getPixelData,\n    getImageData: getImageData,\n    getCanvas: getCanvas,\n    getImage: function getImage() {\n      return image;\n    },\n    rows: rows,\n    columns: columns,\n    height: rows,\n    width: columns,\n    color: true,\n    columnPixelSpacing: undefined,\n    rowPixelSpacing: undefined,\n    invert: false,\n    sizeInBytes: rows * columns * 4 // we don't know for sure so we over estimate to be safe\n  };\n};\n\nvar _externalModules = __webpack_require__(0);\n\nvar canvas = document.createElement('canvas');\nvar lastImageIdDrawn = '';\n\n/**\n * creates a cornerstone Image object for the specified Image and imageId\n *\n * @param image - An Image\n * @param imageId - the imageId for this image\n * @returns Cornerstone Image Object\n */\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.loadImage = loadImage;\nexports.configure = configure;\n\nvar _externalModules = __webpack_require__(0);\n\nvar _arrayBufferToImage = __webpack_require__(1);\n\nvar _arrayBufferToImage2 = _interopRequireDefault(_arrayBufferToImage);\n\nvar _createImage = __webpack_require__(2);\n\nvar _createImage2 = _interopRequireDefault(_createImage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//\n// This is a cornerstone image loader for web images such as PNG and JPEG\n//\nvar options = {\n  // callback allowing customization of the xhr (e.g. adding custom auth headers, cors, etc)\n  beforeSend: function beforeSend() /* xhr */{}\n};\n\n// Loads an image given a url to an image\nfunction loadImage(imageId) {\n  var deferred = _externalModules.external.$.Deferred();\n\n  var xhr = new XMLHttpRequest();\n\n  xhr.open('GET', imageId, true);\n  xhr.responseType = 'arraybuffer';\n  options.beforeSend(xhr);\n\n  xhr.onload = function () {\n    var imagePromise = (0, _arrayBufferToImage2.default)(this.response);\n\n    imagePromise.then(function (image) {\n      var imageObject = (0, _createImage2.default)(image, imageId);\n\n      deferred.resolve(imageObject);\n    }, function (error) {\n      deferred.reject(error);\n    });\n  };\n  xhr.onprogress = function (oProgress) {\n\n    if (oProgress.lengthComputable) {\n      // evt.loaded the bytes browser receive\n      // evt.total the total bytes seted by the header\n      //\n      var loaded = oProgress.loaded;\n      var total = oProgress.total;\n      var percentComplete = Math.round(loaded / total * 100);\n\n      var eventData = {\n        imageId: imageId,\n        loaded: loaded,\n        total: total,\n        percentComplete: percentComplete\n      };\n\n      _externalModules.external.$(_externalModules.external.cornerstone.events).trigger('CornerstoneImageLoadProgress', eventData);\n\n      var customEvent = new CustomEvent('cornerstoneimageloadprogress', { detail: eventData });\n\n      _externalModules.external.cornerstone.events.dispatchEvent(customEvent);\n    }\n  };\n  xhr.send();\n\n  return deferred;\n}\n\nfunction configure(opts) {\n  options = opts;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.external = exports.configure = exports.loadImage = exports.createImage = exports.arrayBufferToImage = undefined;\n\nvar _arrayBufferToImage = __webpack_require__(1);\n\nvar _arrayBufferToImage2 = _interopRequireDefault(_arrayBufferToImage);\n\nvar _createImage = __webpack_require__(2);\n\nvar _createImage2 = _interopRequireDefault(_createImage);\n\nvar _loadImage = __webpack_require__(3);\n\nvar _externalModules = __webpack_require__(0);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.arrayBufferToImage = _arrayBufferToImage2.default;\nexports.createImage = _createImage2.default;\nexports.loadImage = _loadImage.loadImage;\nexports.configure = _loadImage.configure;\nexports.external = _externalModules.external;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (cornerstone) {\n  // Register the http and https prefixes so we can use standard web urls directly\n  cornerstone.registerImageLoader('http', _loadImage.loadImage);\n  cornerstone.registerImageLoader('https', _loadImage.loadImage);\n};\n\nvar _loadImage = __webpack_require__(3);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// cornerstoneWebImageLoader.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap acf17fd3694d46ad0f02","import registerLoaders from './registerLoaders.js';\n\nlet cornerstone;\nlet $ = window.$;\n\nconst external = {\n  set cornerstone (cs) {\n    cornerstone = cs;\n\n    registerLoaders(cornerstone);\n  },\n  get cornerstone () {\n    return cornerstone;\n  },\n  set $ (module) {\n    $ = module;\n  },\n  get $ () {\n    return $;\n  }\n};\n\nexport { external };\n\n\n\n// WEBPACK FOOTER //\n// ./externalModules.js","/**\n * Convert array buffer to image. Returns a promise that resolves to an Image object for the bytes in arrayBuffer\n *\n * @param arrayBuffer - arrayBuffer with bytes for a web image (e.g. JPEG, PNG, etc)\n * @returns {Promise} Promise that resolves to an Image object\n */\nexport default function (arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    const image = new Image();\n    const arrayBufferView = new Uint8Array(arrayBuffer);\n    const blob = new Blob([arrayBufferView]);\n    const urlCreator = window.URL || window.webkitURL;\n    const imageUrl = urlCreator.createObjectURL(blob);\n\n    image.src = imageUrl;\n    image.onload = () => {\n      resolve(image);\n      urlCreator.revokeObjectURL(imageUrl);\n    };\n\n    image.onerror = (error) => {\n      urlCreator.revokeObjectURL(imageUrl);\n      reject(error);\n    };\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./arrayBufferToImage.js","import { external } from './externalModules.js';\n\nconst canvas = document.createElement('canvas');\nlet lastImageIdDrawn = '';\n\n/**\n * creates a cornerstone Image object for the specified Image and imageId\n *\n * @param image - An Image\n * @param imageId - the imageId for this image\n * @returns Cornerstone Image Object\n */\nexport default function (image, imageId) {\n  // extract the attributes we need\n  const rows = image.naturalHeight;\n  const columns = image.naturalWidth;\n\n  function getPixelData () {\n    const imageData = getImageData();\n    const imageDataData = imageData.data;\n    const numPixels = image.naturalHeight * image.naturalWidth;\n    const storedPixelData = new Uint8Array(numPixels * 4);\n    let imageDataIndex = 0;\n    let storedPixelDataIndex = 0;\n\n    for (let i = 0; i < numPixels; i++) {\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = imageDataData[imageDataIndex++];\n      storedPixelData[storedPixelDataIndex++] = 255; // alpha\n      imageDataIndex++;\n    }\n\n    return storedPixelData;\n  }\n\n  function getImageData () {\n    let context;\n\n    if (lastImageIdDrawn === imageId) {\n      context = canvas.getContext('2d');\n    } else {\n      canvas.height = image.naturalHeight;\n      canvas.width = image.naturalWidth;\n      context = canvas.getContext('2d');\n      context.drawImage(image, 0, 0);\n      lastImageIdDrawn = imageId;\n    }\n\n    return context.getImageData(0, 0, image.naturalWidth, image.naturalHeight);\n  }\n\n  function getCanvas () {\n    if (lastImageIdDrawn === imageId) {\n      return canvas;\n    }\n\n    canvas.height = image.naturalHeight;\n    canvas.width = image.naturalWidth;\n    const context = canvas.getContext('2d');\n\n    context.drawImage(image, 0, 0);\n    lastImageIdDrawn = imageId;\n\n    return canvas;\n  }\n\n  // Extract the various attributes we need\n  return {\n    imageId,\n    minPixelValue: 0,\n    maxPixelValue: 255,\n    slope: 1.0,\n    intercept: 0,\n    windowCenter: 128,\n    windowWidth: 255,\n    render: external.cornerstone.renderWebImage,\n    getPixelData,\n    getImageData,\n    getCanvas,\n    getImage: () => image,\n    rows,\n    columns,\n    height: rows,\n    width: columns,\n    color: true,\n    columnPixelSpacing: undefined,\n    rowPixelSpacing: undefined,\n    invert: false,\n    sizeInBytes: rows * columns * 4 // we don't know for sure so we over estimate to be safe\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./createImage.js","import { external } from './externalModules.js';\nimport arrayBufferToImage from './arrayBufferToImage.js';\nimport createImage from './createImage.js';\n\n//\n// This is a cornerstone image loader for web images such as PNG and JPEG\n//\nlet options = {\n  // callback allowing customization of the xhr (e.g. adding custom auth headers, cors, etc)\n  beforeSend (/* xhr */) {}\n};\n\n\n// Loads an image given a url to an image\nexport function loadImage (imageId) {\n  const deferred = external.$.Deferred();\n\n  const xhr = new XMLHttpRequest();\n\n  xhr.open('GET', imageId, true);\n  xhr.responseType = 'arraybuffer';\n  options.beforeSend(xhr);\n\n  xhr.onload = function () {\n    const imagePromise = arrayBufferToImage(this.response);\n\n    imagePromise.then(function (image) {\n      const imageObject = createImage(image, imageId);\n\n      deferred.resolve(imageObject);\n    }, function (error) {\n      deferred.reject(error);\n    });\n  };\n  xhr.onprogress = function (oProgress) {\n\n    if (oProgress.lengthComputable) { // evt.loaded the bytes browser receive\n      // evt.total the total bytes seted by the header\n      //\n      const loaded = oProgress.loaded;\n      const total = oProgress.total;\n      const percentComplete = Math.round((loaded / total) * 100);\n\n      const eventData = {\n        imageId,\n        loaded,\n        total,\n        percentComplete\n      };\n\n      external.$(external.cornerstone.events).trigger('CornerstoneImageLoadProgress', eventData);\n\n      const customEvent = new CustomEvent('cornerstoneimageloadprogress', { detail: eventData });\n\n      external.cornerstone.events.dispatchEvent(customEvent);\n    }\n  };\n  xhr.send();\n\n  return deferred;\n}\n\nexport function configure (opts) {\n  options = opts;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./loadImage.js","import arrayBufferToImage from './arrayBufferToImage.js';\nimport createImage from './createImage.js';\nimport { loadImage, configure } from './loadImage.js';\nimport { external } from './externalModules.js';\n\nexport {\n  arrayBufferToImage,\n  createImage,\n  loadImage,\n  configure,\n  external\n};\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import { loadImage } from './loadImage.js';\n\nexport default function (cornerstone) {\n  // Register the http and https prefixes so we can use standard web urls directly\n  cornerstone.registerImageLoader('http', loadImage);\n  cornerstone.registerImageLoader('https', loadImage);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./registerLoaders.js"],"sourceRoot":""}